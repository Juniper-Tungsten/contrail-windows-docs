



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.3, mkdocs-material-3.0.3">
    
    
      
        <title>Updating private docker registry - Windows Contrail documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../../../highlight.css">
    
      <link rel="stylesheet" href="../../../../theme.css">
    
      <link rel="stylesheet" href="../../../../theme_extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../../#updating-private-docker-registry" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="Windows Contrail documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Windows Contrail documentation
              </span>
              <span class="md-header-nav__topic">
                Updating private docker registry
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="Windows Contrail documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Windows Contrail documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      For CI admins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        For CI admins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Backups
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Backups
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Backups/Infrastructure_backups/" title="Infrastructure backups" class="md-nav__link">
      Infrastructure backups
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      CI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        CI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../CI/Builder_nodes/" title="Managing build dependencies" class="md-nav__link">
      Managing build dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../CI/Merge_development_to_production/" title="Merge development to production" class="md-nav__link">
      Merge development to production
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../CI/Run_gerrit_pipeline_on_github_PR/" title="Run gerrit pipeline on github PR" class="md-nav__link">
      Run gerrit pipeline on github PR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../CI/Update_Jenkins_slaves/" title="Updating Jenkins slaves" class="md-nav__link">
      Updating Jenkins slaves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../CI/Update_Zuul/" title="Update Windows CI Zuulv2" class="md-nav__link">
      Update Windows CI Zuulv2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../CI/contrail_deployment_in_ci/" title="Contrail deployment in Windows CI" class="md-nav__link">
      Contrail deployment in Windows CI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3" checked>
    
    <label class="md-nav__link" for="nav-2-3">
      Infra
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Infra
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../List_of_VMs_in_Windows_CI/" title="List of all important VMs in Windows CI" class="md-nav__link">
      List of all important VMs in Windows CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Windows_CI_infrastructure/" title="Windows CI infrastructure diagram" class="md-nav__link">
      Windows CI infrastructure diagram
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-3" type="checkbox" id="nav-2-3-3" checked>
    
    <label class="md-nav__link" for="nav-2-3-3">
      Docker registry
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-3-3">
        Docker registry
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Docker_registry_provisioning/" title="Docker registry provisioning" class="md-nav__link">
      Docker registry provisioning
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Updating private docker registry
      </label>
    
    <a href="./" title="Updating private docker registry" class="md-nav__link md-nav__link--active">
      Updating private docker registry
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-is-the-update-needed-what-need-to-be-updated" title="When is the update needed? What need to be updated?" class="md-nav__link">
    When is the update needed? What need to be updated?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-update" title="How to update" class="md-nav__link">
    How to update
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-update-contrail-images" title="How to update Contrail images" class="md-nav__link">
    How to update Contrail images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-update-openstack-images" title="How to update Openstack images" class="md-nav__link">
    How to update Openstack images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-4" type="checkbox" id="nav-2-3-4">
    
    <label class="md-nav__link" for="nav-2-3-4">
      VMWare cluster
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-3-4">
        VMWare cluster
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../VMWare cluster/Prepare_Host_for_Maintenance/" title="Prepare an ESXi Host for Maintenance" class="md-nav__link">
      Prepare an ESXi Host for Maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../VMWare cluster/Reconnecting_Host/" title="Reconnecting Host to Contrail Windows CI cluster" class="md-nav__link">
      Reconnecting Host to Contrail Windows CI cluster
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Nightly
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Nightly
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nightly/nightly_builds/" title="Nightly builds in Windows CI" class="md-nav__link">
      Nightly builds in Windows CI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      For developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        For developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1-1" type="checkbox" id="nav-3-1-1">
    
    <label class="md-nav__link" for="nav-3-1-1">
      Style guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-1-1">
        Style guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Contributing/Style guides/C/" title="C" class="md-nav__link">
      C
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Contributing/Style guides/Cpp/" title="Cpp" class="md-nav__link">
      Cpp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Contributing/Style guides/Go/" title="Go" class="md-nav__link">
      Go
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Developer guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Developer guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-1" type="checkbox" id="nav-3-2-1">
    
    <label class="md-nav__link" for="nav-3-2-1">
      Research
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-1">
        Research
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Developer guide/Research/Experiment_dockerized_builder_using_ansible/" title="Failed experiment: dockerized builder using ansible" class="md-nav__link">
      Failed experiment: dockerized builder using ansible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Developer guide/Research/dns_in_contrail_overview/" title="Few words about DNS in Contrail" class="md-nav__link">
      Few words about DNS in Contrail
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2-2" type="checkbox" id="nav-3-2-2">
    
    <label class="md-nav__link" for="nav-3-2-2">
      Setting up
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-2-2">
        Setting up
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Developer guide/Setting up/Devenv_in_local_env/" title="Devenv in CodiLime VMware lab" class="md-nav__link">
      Devenv in CodiLime VMware lab
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Interpreting CI logs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Interpreting CI logs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Interpreting CI logs/Windows_CI_logs_layout/" title="Windows CI logs layout" class="md-nav__link">
      Windows CI logs layout
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Technical documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Technical documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Blueprint_5.0/" title="Blueprint 5.0" class="md-nav__link">
      Blueprint 5.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Communication_Agent_Extension/" title="Communication Agent Extension" class="md-nav__link">
      Communication Agent Extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Container_creation_lifecycle/" title="Container creation lifecycle" class="md-nav__link">
      Container creation lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Docker_on_Windows/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Forwarding_extension/" title="Forwarding extension" class="md-nav__link">
      Forwarding extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/HyperV_extensible_switch/" title="HyperV extensible switch" class="md-nav__link">
      HyperV extensible switch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Linux_Overview/" title="Contrail Controller" class="md-nav__link">
      Contrail Controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/NBL_processing/" title="NET_BUFFER_LIST processing" class="md-nav__link">
      NET_BUFFER_LIST processing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/NDIS_driver_types_overview/" title="NDIS (Network Driver Interface Specification) driver types overview" class="md-nav__link">
      NDIS (Network Driver Interface Specification) driver types overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Network_creation_lifecycle/" title="Network creation lifecycle" class="md-nav__link">
      Network creation lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Offloading_IP_checksums_and_other_tasks/" title="Offloading IP Checksums and other tasks" class="md-nav__link">
      Offloading IP Checksums and other tasks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Root_HNS_network/" title="Root HNS network" class="md-nav__link">
      Root HNS network
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/Utility_tools/" title="Utility tools" class="md-nav__link">
      Utility tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Technical documentation/vRouter_Linux_implementation/" title="vRouter Linux implementation" class="md-nav__link">
      vRouter Linux implementation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Updating this documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Updating this documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../For developers/Updating this documentation/How_to_update_this_documentation/" title="How to update this documentation" class="md-nav__link">
      How to update this documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Known issues
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Known issues
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Known_issues/HNS_error_bestiary/" title="HNS errors bestiary" class="md-nav__link">
      HNS errors bestiary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Known_issues/Known_issues/" title="Workarounds for known issues" class="md-nav__link">
      Workarounds for known issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Known_issues/Not_supported/" title="Unsupported features" class="md-nav__link">
      Unsupported features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Known_issues/Troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Quick start
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Quick start
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Quick_start/connection_scenarios/" title="Supported connection scenarios" class="md-nav__link">
      Supported connection scenarios
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Quick_start/deployment/" title="Deploying Contrail with Windows compute nodes" class="md-nav__link">
      Deploying Contrail with Windows compute nodes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../Quick_start/usage/" title="Usage" class="md-nav__link">
      Usage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#when-is-the-update-needed-what-need-to-be-updated" title="When is the update needed? What need to be updated?" class="md-nav__link">
    When is the update needed? What need to be updated?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-update" title="How to update" class="md-nav__link">
    How to update
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-update-contrail-images" title="How to update Contrail images" class="md-nav__link">
    How to update Contrail images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-update-openstack-images" title="How to update Openstack images" class="md-nav__link">
    How to update Openstack images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" title="References" class="md-nav__link">
    References
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="updating-private-docker-registry">Updating private docker registry</h1>
<h2 id="when-is-the-update-needed-what-need-to-be-updated">When is the update needed? What need to be updated?</h2>
<p>The update of local docker registry is required when the version of Controller used in Windows CI is updated to a newer one. All Contrail images required by Contrail Ansible Deployer running in Windows CI have to be updated to version matching selected Controller version. Some new cached Openstack images may be required by updated Contrail Ansible Deployer.</p>
<h2 id="how-to-update">How to update</h2>
<h3 id="how-to-update-contrail-images">How to update Contrail images</h3>
<ol>
<li>
<p>Choose Contrail version tag you want to be cached in private docker registry:</p>
<ul>
<li>all available tags can be found <a href="https://hub.docker.com/r/opencontrailnightly/contrail-vrouter-agent/tags/">here</a>.</li>
</ul>
</li>
<li>
<p>Log into <code>winci-registry</code>:</p>
<ul>
<li>please contact Windows CI team for access.</li>
</ul>
</li>
<li>
<p>Check if there is <code>update-docker-registry.py</code> script in root directory.</p>
</li>
<li>
<p>If there is no such script:</p>
<ul>
<li>
<p>download it from <a href="https://github.com/Juniper/contrail-windows-ci/tree/development/utility/update_docker_registry">here</a>:</p>
<pre><code>curl https://raw.githubusercontent.com/Juniper/contrail-windows-ci/development/utility/update_docker_registry/update-docker-registry.py --output update-docker-registry.py
</code></pre>
</li>
<li>
<p>make it executable:</p>
<pre><code>chmod +x ./update-docker-registry.py
</code></pre>
</li>
</ul>
</li>
<li>
<p>Run the script with Contrail version tag as parameter, for example:</p>
<pre><code>./update-docker-registry.py ocata-master-206
</code></pre>
</li>
<li>
<p>If new version of Contrail Ansible Deployer uses more images than listed in <code>update-docker-registry.py</code> script:</p>
<ul>
<li>update images list in the script locally,</li>
<li>open up a PR with updated images list to contrail-windows-ci.</li>
</ul>
</li>
</ol>
<h3 id="how-to-update-openstack-images">How to update Openstack images</h3>
<p>New version of Contrail Ansible Deployer may also use some new Openstack images. Currently there is no script that does this automatically. For caching Openstack images manually please do the folowing:</p>
<ol>
<li>
<p>Log into <code>winci-registry</code>:</p>
<ul>
<li>please contact Windows CI team for access.</li>
</ul>
</li>
<li>
<p>Set the name of required image in local variable (replace <code>&lt;IMAGE-NAME&gt;</code> with proper value:</p>
<pre><code>image_name=&lt;IMAGE-NAME&gt;
</code></pre>
</li>
<li>
<p>Pull the image:</p>
<pre><code>docker image pull ci-repo.englab.juniper.net:5000/kolla/${image_name}:ocata
</code></pre>
</li>
<li>
<p>Get the Image ID of previously pulled image:</p>
<pre><code>image_id=$(docker image ls | grep kolla | grep ${image_name} | awk '{ print $3 }' | uniq)
</code></pre>
<ul>
<li>verify the ID:<pre><code>echo "$image_id"
</code></pre>
</li>
</ul>
</li>
<li>
<p>Tag the image:</p>
<pre><code>docker tag ${image_id} localhost:5000/kolla/${image_name}:ocata
</code></pre>
</li>
<li>
<p>Push the image to local repository:</p>
<pre><code>docker push localhost:5000/kolla/${image_name}:ocata
</code></pre>
</li>
<li>
<p>Repeat steps 2-6 for all other required images.</p>
</li>
</ol>
<h2 id="references">References</h2>
<ol>
<li><a href="https://docs.docker.com/registry/deploying/">Deploy a registry server — Docker Documentation</a></li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Docker_registry_provisioning/" title="Docker registry provisioning" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Docker registry provisioning
              </span>
            </div>
          </a>
        
        
          <a href="../../VMWare cluster/Prepare_Host_for_Maintenance/" title="Prepare an ESXi Host for Maintenance" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Prepare an ESXi Host for Maintenance
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.3",url:{base:"../../../.."}})</script>
      
    
    
      
    
  </body>
</html>