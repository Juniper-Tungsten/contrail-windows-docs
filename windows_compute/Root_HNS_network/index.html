<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Root HNS network - Tungsten Fabric for Windows Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Root HNS network";
    var mkdocs_page_input_path = "windows_compute/Root_HNS_network.md";
    var mkdocs_page_url = "/windows_compute/Root_HNS_network/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../continuous_deployment/Merge_development_to_production/" class="icon icon-home"> Tungsten Fabric for Windows Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <span class="caption-text">Continuous deployment</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../continuous_deployment/Merge_development_to_production/">Merge development to production</a>
                </li>
                <li class="">
                    
    <a class="" href="../../continuous_deployment/Run_gerrit_pipeline_on_github_PR/">Run gerrit pipeline on github PR</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Style guides</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../style_guides/C/">C</a>
                </li>
                <li class="">
                    
    <a class="" href="../../style_guides/Cpp/">Cpp</a>
                </li>
                <li class="">
                    
    <a class="" href="../../style_guides/Go/">Go</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Windows compute</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../Communication_Agent_Extension/">Communication Agent Extension</a>
                </li>
                <li class="">
                    
    <a class="" href="../Container_creation_lifecycle/">Container creation lifecycle</a>
                </li>
                <li class="">
                    
    <a class="" href="../Docker_on_Windows/">Docker</a>
                </li>
                <li class="">
                    
    <a class="" href="../Forwarding_extension/">Forwarding extension</a>
                </li>
                <li class="">
                    
    <a class="" href="../HyperV_extensible_switch/">HyperV extensible switch</a>
                </li>
                <li class="">
                    
    <a class="" href="../Linux_Overview/">Contrail Controller</a>
                </li>
                <li class="">
                    
    <a class="" href="../Network_creation_lifecycle/">Network creation lifecycle</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Root HNS network</a>
    <ul class="subnav">
            
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../Utility_tools/">Utility tools</a>
                </li>
                <li class="">
                    
    <a class="" href="../_Blueprint/"> Blueprint</a>
                </li>
                <li class="">
                    
    <a class="" href="../vRouter_Linux_implementation/">vRouter Linux implementation</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../continuous_deployment/Merge_development_to_production/">Tungsten Fabric for Windows Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../continuous_deployment/Merge_development_to_production/">Docs</a> &raquo;</li>
    
      
        
          <li>Windows compute &raquo;</li>
        
      
    
    <li>Root HNS network</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="/contrail-windows-docs/windows_compute/Root_HNS_network.md"> Edit on </a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>HNS operates by using two virtual switches:</p>
<ul>
<li>an external vswitch, which is connected directly to physical adapter. This adapter is called "vEthernet (HNSTransparent)", and the switch is called "Layered Etherenet0" depending on which physicial adapter it's connected to. If there is physical NIC teaming, then its name contains all the physical adapters separated by a coma, like "Layered Ethernet0,Ethernet1"</li>
<li>an internal vswitch, for the purpose of NATing. The adapter that connects to the host is named "vEthernet (HNS Internal NIC)", and the switch is called "nat".</li>
</ul>
<p>Those virtual switches are not created unless there is at least one HNS network using corresponding Mode: "transparent" or "nat". If the last network of corresponding Mode is removed, the vswitch is also removed. Creation/deletion of vswitch takes a couple seconds and disrupts network connectivity.</p>
<p>This dynamism of creating/deleting vswitches poses a problem, because we want vRouter Forwarding Extension to be persistent, no matter if there are many or no virtual networks. That's why, when Docker Driver initializes, it creates a "dummy" Root HNS Network, which makes HNS create an external vswitch "Layered Ethernet*". Forwarding Extension is then enabled for that vswitch.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Utility_tools/" class="btn btn-neutral float-right" title="Utility tools">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Network_creation_lifecycle/" class="btn btn-neutral" title="Network creation lifecycle"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Network_creation_lifecycle/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Utility_tools/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
